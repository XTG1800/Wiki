<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>读取TXT文件</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
    <link rel="Stylesheet" type="text/css" href="../css_style/style_zenki.css">

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>

<!-- wrap the vimwiki html -->

<h1 id="toc_1">读取TXT文件</h1>

<h2 id="toc_1.1">示例代码</h2>
<pre class="brush:java">
// 读取TXT文件
public static String readTextFile(File file, int max, String ellipsis)
        throws IOException {
    InputStream input = new FileInputStream(file);
    try {
        long size = file.length();
        if (max &gt; 0 || (size &gt; 0 &amp;&amp; max == 0)) {

            if (size &gt; 0 &amp;&amp; (max == 0 || size &lt; max))
                max = (int) size;
            byte[] data = new byte[max + 1];

            int length = input.read(data);

            if (length &lt;= 0)
                return "";
            if (length &lt;= max)
                return new String(data, 0, length);
            if (ellipsis == null)
                = return new String(data, 0, max); =

            return new String(data, 0, max) + ellipsis;
        } else if (max &lt; 0) {
            // "tail" mode: keep the last N
            int len;
            boolean rolled = false;
            byte[] last = null, data = null;
            do {
                if (last != null)
                    rolled = true;

                byte[] tmp = last;
                last = data;
                data = tmp;
                if (data == null)
                    data = new byte[-max];

                len = input.read(data);
            } while (len == data.length);

            if (last == null &amp;&amp; len &lt;= 0)
                return "";
            if (last == null)
                return new String(data, 0, len);

            if (len &gt; 0) {
                rolled = true;
                System.arraycopy(last, len, last, 0, last.length - len);
                System.arraycopy(data, 0, last, last.length - len, len);
            }
            if (ellipsis == null || !rolled)
                return new String(last);

            return ellipsis + new String(last);
        } else {
            ByteArrayOutputStream contents = new ByteArrayOutputStream();
            int len;
            byte[] data = new byte[1024];
            do {
                len = input.read(data);
                if (len &gt; 0)
                    contents.write(data, 0, len);

            } while (len == data.length);
            return contents.toString();
        }
    } finally {
        input.close();
    }
}
</pre>


<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

</body>
</html>
