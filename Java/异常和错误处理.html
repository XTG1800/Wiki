<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>异常和错误处理</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
	<link type="text/css" rel="stylesheet" href="css_style/style_zenki.css"/>

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>


<h1 id="toc_1">异常和错误处理</h1>

<h2 id="toc_1.1">异常处理语句格式</h2>
<pre class="brush: java">
try {
    // do something
} catch (Type1 id1) {
    // do something
} catch (Type2 id2) {
    // do something
} catch (Type3 id3) {
}
</pre>

<h2 id="toc_1.2">异常抛出</h2>
<pre class="brush:java">
public void function() throws MyException1, MyException2 {
    // do something
    throw new MyException();
}
</pre>

<h2 id="toc_1.3">异常类常用的方法</h2>
<p>
获取详细信息
</p>
<pre class="brush:text">
String getMessage( )
String getLocalizedMessage( )
</pre>

<p>
返回对 Throwable 的简单描述,要是有详细信息的话,也会把它包含在内
</p>
<pre class="brush:text">
String toString( )
</pre>

<p>
打印 Throwable 和 Throwable 的调用栈轨迹
</p>
<pre class="brush:text">
void printStackTrace( )
void printStackTrace(PrintStream)
void printStackTrace(java.io.PrintWriter)
</pre>

<p>
用于在 Throwable 对象的内部记录栈框架的当前状态
</p>
<pre class="brush:text">
Throwable fillInStackTrace( )
</pre>

<p>
返回该类型对象或名称
</p>
<pre class="brush:text">
getClass( ) 
getName( )
</pre>

<h2 id="toc_1.4">重新抛出异常</h2>
<p>
可以再捕捉到本次异常后重新抛出异常,再次抛出异常时,不会自动更新上次异常调用栈的信息,
</p>

<p>
需要使用fillInStackTrace方法来更新该信息,并且抛出的异常为Throwable类
</p>
<pre class="brush:java">
try {
    f();
} catch(Exception e) {
    System.err.println("Inside g(),e.printStackTrace()");
    e.printStackTrace();
    throw e.fillInStackTrace(); 
}
</pre>

<h2 id="toc_1.5">关键字finally</h2>
<p>
使用finally可以保证无论是否抛出异常,总能执行该代码
</p>
<pre class="brush:java">
try {
    // The guarded region: Dangerous activities
    // that might throw A, B, or C
} catch(A a1) {
    // Handler for situation A
} catch(B b1) {
    // Handler for situation B
} catch(C c1) {
    // Handler for situation C
} finally {
    // Activities that happen every time
}
</pre>

<h2 id="toc_1.6">异常与继承</h2>
<ul>
<li>
构造器和方法可以声明异常而不抛出
</li>
<li>
如果基类实现了一个方法的异常,那么在继承类的方法中就不能抛出其他类型的异常
</li>
<li>
构造器可以抛出任何类型的异常
</li>
<li>
如果基类定义的方法没有声明异常,那么派生类和基类就不能抛出任何异常
</li>
<li>
不能根据异常类型的说明来重载方法
</li>
</ul>
 
<h2 id="toc_1.7">异常匹配</h2>
<ul>
<li>
异常处理程序按顺序查找与抛出的异常相匹配的处理程序,找到后就不再查找
</li>
<li>
异常处理程序也可以匹配基类的异常对象
</li>
</ul>

<h2 id="toc_1.8">异常使用指南</h2>
<p>
你应该在下列情况下使用异常:
</p>
<ol>
<li>
在恰当的级别处理问题。(在你知道该如何处理的情况下才捕获异常)。
</li>
<li>
解决问题并且重新调用产生异常的方法。
</li>
<li>
进行少许修补,然后绕过异常发生的地方继续执行。
</li>
<li>
用别的数据进行计算,以代替方法返回的期望值。
</li>
<li>
把当前运行环境下能做的事情尽量作完,然后把相同的异常重抛(rethrow)到更高层。
</li>
<li>
把当前运行环境下能做的事情尽量作完,然后把不同的异常抛(throw)到更高层。
</li>
<li>
终止程序。
</li>
<li>
进行简化。(如果异常把问题搞得太复杂,那用起来会非常痛苦也很烦人。)
</li>
<li>
让类库和程序更安全。(这既是在为调试做短期投资,也是在为程序的健壮性做长期投资。)
</li>
</ol>
<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

<!--<script type="text/javascript">-->
<!--var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");-->
<!--document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));-->
<!--</script>-->
<!--<script type="text/javascript">-->
<!--try {-->
<!--var pageTracker = _gat._getTracker("UA-15922433-1");-->
<!--pageTracker._trackPageview();-->
<!--} catch(err) {}-->
<!--</script>-->

</body>
</html>
