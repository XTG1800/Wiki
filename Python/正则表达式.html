<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>正则表达式</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
    <link rel="Stylesheet" type="text/css" href="../css_style/style_zenki.css">

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>

<!-- wrap the vimwiki html -->

<h1 id="toc_1">正则表达式</h1>

<div class="toc">
<ul>
<li><a href="#toc_1">正则表达式</a>
<ul>
<li><a href="#toc_1.1">基础概念</a>
<li><a href="#toc_1.2">sub(替换)</a>
<li><a href="#toc_1.3">search(单个匹配查找)</a>
<li><a href="#toc_1.4">finditer和findall(全匹配查找)</a>
<li><a href="#toc_1.5">compile(编译正则表达式)</a>
<li><a href="#toc_1.6">groups和groupdict(分组匹配)</a>
<li><a href="#toc_1.7">split(分割)</a>
</ul>
</ul>
</div>

<p>
<a href="http://www.cnblogs.com/coderzh/archive/2008/05/06/1185755.html">参考链接</a>
</p>

<h2 id="toc_1.1">基础概念</h2>
<ul>
<li>
使用正则表达式需要导入<code>re</code>模块。

<li>
一个正则表达式的字符串可以使用<code>r'pattern'</code>的形式表示。

<li>
^ 匹配字符串的开始。

<li>
$ 匹配字符串的结尾。

<li>
\b 匹配一个单词的边界。

<li>
\d 匹配任意数字。

<li>
\D 匹配任意非数字字符。

<li>
x? 匹配一个可选的 x 字符 (换言之，它匹配 1 次或者 0 次 x 字符)。

<li>
x* 匹配0次或者多次 x 字符。

<li>
x+ 匹配1次或者多次 x 字符。

<li>
x{n,m} 匹配 x 字符，至少 n 次，至多 m 次。

<li>
(a|b|c) 要么匹配 a，要么匹配 b，要么匹配 c。

<li>
<code>(x)</code> 一般情况下表示一个记忆组 (remembered group)。你可以利用 re.search 函数返回对象的 groups() 函数获取它的值。

</ul>

<h2 id="toc_1.2">sub(替换)</h2>
<ul>
<li>
第一个参数为需要匹配的正则表达式。

<li>
第二个参数为替换的字符串。

<li>
第三个参数为需要查找的字符串。

</ul>

<pre class="brush:python">
&gt;&gt;&gt; s = '100 BROAD'
&gt;&gt;&gt; re.sub('ROAD$', 'RD.', s)
'100 BRD.'
&gt;&gt;&gt; re.sub('\\bROAD$', 'RD.', s)
'100 BROAD'
&gt;&gt;&gt; re.sub(r'\bROAD$', 'RD.', s)
'100 BROAD'
</pre>

<h2 id="toc_1.3">search(单个匹配查找)</h2>
<ul>
<li>
判断给定的字符串是否符合正则表达式。

</ul>

<pre class="brush:python">
&gt;&gt;&gt; pattern = '^M?M?M?(CM|CD|D?C?C?C?)$' 
&gt;&gt;&gt; re.search(pattern, 'MCM')
&lt;SRE_Match object at 01070390&gt;
&gt;&gt;&gt; re.search(pattern, 'MD')
&lt;SRE_Match object at 01073A50&gt;
&gt;&gt;&gt; re.search(pattern, 'MMMCCC')
&lt;SRE_Match object at 010748A8&gt;
&gt;&gt;&gt; re.search(pattern, 'MCMC')
&gt;&gt;&gt; re.search(pattern, '')
&lt;SRE_Match object at 01071D98&gt;
</pre>

<h2 id="toc_1.4">finditer和findall(全匹配查找)</h2>
<ul>
<li>
findall返回所有匹配正则表达式的结果。

<li>
finditer返回匹配对象，可以使用for遍历该对象获取匹配结果。

</ul>

<pre class="brush:python">
# findall使用
&gt;&gt;&gt; text = "He was carefully disguised but captured quickly by police."
&gt;&gt;&gt; re.findall(r"\w+ly", text)
['carefully', 'quickly']

# finditer使用
&gt;&gt;&gt; text = "He was carefully disguised but captured quickly by police."
&gt;&gt;&gt; for m in re.finditer(r"\w+ly", text):
...     print '%02d-%02d: %s' % (m.start(), m.end(), m.group(0))
07-16: carefully
40-47: quickly
</pre>

<h2 id="toc_1.5">compile(编译正则表达式)</h2>
<ul>
<li>
当一个正则表达式需要多次使用时，通过compile能够产生更好的效率。

</ul>

<pre class="brush:python">
&gt;&gt;&gt; phonePattern = re.compile(r'^(\d{3})\D*(\d{3})\D*(\d{4})\D*(\d*)$')
&gt;&gt;&gt; phonePattern.search('80055512121234').groups()
('800', '555', '1212', '1234')
&gt;&gt;&gt; phonePattern.search('800.555.1212 x1234').groups()
('800', '555', '1212', '1234')
&gt;&gt;&gt; phonePattern.search('800-555-1212').groups()
('800', '555', '1212', '')
</pre>

<h2 id="toc_1.6">groups和groupdict(分组匹配)</h2>
<ul>
<li>
当在正则表达式中使用<code>(pattern)</code>的形式匹配时，可使用匹配对象的groups方法将结果分组。

<li>
当在正则表达式中使用<code>(?P&lt;key&gt;pattern)</code>的形式匹配时，可使用groupdict方法可将分组的形式转换成一个字典。

</ul>

<pre class="brush:python">
# 匹配分组模式
&gt;&gt;&gt; m = re.match(r"(\d+)\.(\d+)", "24.1632")
&gt;&gt;&gt; m.groups()
('24', '1632')
&gt;&gt;&gt; m.group(1)
'Malcom'
&gt;&gt;&gt; m.group(2)
'Reynolds'

# 将分组模式转换成字典形式
# 注意在正则表达式的写法：(?P&lt;key&gt;pattern)
&gt;&gt;&gt; m = re.match(r"(?P&lt;first_name&gt;\w+) (?P&lt;last_name&gt;\w+)", "Malcom Reynolds")
&gt;&gt;&gt; m.groupdict()
{'first_name': 'Malcom', 'last_name': 'Reynolds'}
</pre>

<h2 id="toc_1.7">split(分割)</h2>
<ul>
<li>
功能同字符串的split方法一样，不同的是通过匹配的正则表达式作为分隔符。

</ul>

<pre class="brush:python">
&gt;&gt;&gt; input = """Ross McFluff: 834.345.1254 155 Elm Street
...
... Ronald Heathmore: 892.345.3428 436 Finley Avenue
... Frank Burger: 925.541.7625 662 South Dogwood Way
...
...
... Heather Albrecht: 548.326.4584 919 Park Place"""

# 将一个或多个\n作为分割符
&gt;&gt;&gt; entries = re.split("\n+", input)
&gt;&gt;&gt; entries
['Ross McFluff: 834.345.1254 155 Elm Street',
'Ronald Heathmore: 892.345.3428 436 Finley Avenue',
'Frank Burger: 925.541.7625 662 South Dogwood Way',
'Heather Albrecht: 548.326.4584 919 Park Place']
</pre>


<footer>
    <a href="http://zenki2001cn.github.com/Wiki" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="zenki2001cn@163.com" id="back-email">Email</a>
</footer>

</article>
</div>

</body>
</html>
