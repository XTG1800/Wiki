<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Intent传递对象</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
	<link type="text/css" rel="stylesheet" href="css_style/style_zenki.css"/>

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>


<h1 id="toc_1">Intent传递对象</h1>

<h2 id="toc_1.1">相关类</h2>
<pre class="brush:java">
import java.io.Serializable; 

import android.content.Intent;

import android.os.Parcel;  
import android.os.Parcelable;
import android.os.Bundle;
</pre>

<h2 id="toc_1.2">基本流程</h2>
<ul>
<li>
需要为传递对象实现<code>Serializable</code>接口或者<code>Parcelable</code>接口。
</li>
<li>
在发送端生成传递对象实例和Bundle对象实例，通过<code>putSerializable</code>或<code>putParcelable</code>方法将传递对象加入到Bundle对象中。
</li>
<li>
接收端通过Intent的<code>getSerializableExtra</code>或<code>getParcelableExtra</code>获取传递对象。
</li>
</ul>

<h2 id="toc_1.3">示例代码</h2>

<h3 id="toc_1.3.1">定义传递对象</h3>
<p>
Serializable接口类
</p>
<pre class="brush:java">
public class Person implements Serializable {  

    private static final long serialVersionUID = -7060210544600464481L;   
    private String name;  
    private int age;  
    
    public String getName() {  
        return name;  
    }  
    
    public void setName(String name) {  
        this.name = name;  
    }  
    
    public int getAge() {  
        return age;  
    }  
    
    public void setAge(int age) {  
        this.age = age;  
    }  
}
</pre>

<p>
Parcelable接口类
</p>
<pre class="brush:java">
public class Book implements Parcelable {  
    private String bookName;  
    private String author;  
    private int publishTime;  
      
    public String getBookName() {  
        return bookName;  
    }  
    
    public void setBookName(String bookName) {  
        this.bookName = bookName;  
    }  
    
    ......  
      
    public static final Parcelable.Creator&lt;Book&gt; CREATOR = new Creator&lt;Book&gt;() {  
        public Book createFromParcel(Parcel source) {  
            Book mBook = new Book();  
            mBook.bookName = source.readString();  
            mBook.author = source.readString();  
            mBook.publishTime = source.readInt();  
            return mBook;  
        }  
        public Book[] newArray(int size) {  
            return new Book[size];  
        }  
    };  
      
    public int describeContents() {  
        return 0;  
    }  
    
    public void writeToParcel(Parcel parcel, int flags) {  
        parcel.writeString(bookName);  
        parcel.writeString(author);  
        parcel.writeInt(publishTime);  
    }  
}
</pre>

<h3 id="toc_1.3.2">发送端传递对象</h3>
<p>
传递Serializeable对象
</p>
<pre class="brush:java">
Person mPerson = new Person();  
mPerson.setName("frankie");  
mPerson.setAge(25);  

Intent mIntent = new Intent(this,ObjectTranDemo1.class);  
Bundle mBundle = new Bundle();  
mBundle.putSerializable(SER_KEY,mPerson);  
mIntent.putExtras(mBundle);  
  
startActivity(mIntent);
</pre>

<p>
传递Pacelable对象
</p>
<pre class="brush:java">
Book mBook = new Book();  
mBook.setBookName("Android Tutor");  
mBook.setAuthor("Frankie");  
mBook.setPublishTime(2010);  

Intent mIntent = new Intent(this,ObjectTranDemo2.class);  
Bundle mBundle = new Bundle();  
mBundle.putParcelable(PAR_KEY, mBook);  
mIntent.putExtras(mBundle);  
  
startActivity(mIntent); 
</pre>

<h3 id="toc_1.3.3">接收端获取对象</h3>
<p>
获取Serializeable对象
</p>
<pre class="brush:java">
Person mPerson = (Person)getIntent().getSerializableExtra(ObjectTranDemo.SER_KEY);
</pre>

<p>
获取Pacelable对象
</p>
<pre class="brush:java">
Book mBook = (Book)getIntent().getParcelableExtra(ObjectTranDemo.PAR_KEY);
</pre>
<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

<!--<script type="text/javascript">-->
<!--var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");-->
<!--document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));-->
<!--</script>-->
<!--<script type="text/javascript">-->
<!--try {-->
<!--var pageTracker = _gat._getTracker("UA-15922433-1");-->
<!--pageTracker._trackPageview();-->
<!--} catch(err) {}-->
<!--</script>-->

</body>
</html>
