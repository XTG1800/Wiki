<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Intent</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
    <link rel="Stylesheet" type="text/css" href="../css_style/style_zenki.css">

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>

<!-- wrap the vimwiki html -->

<h1 id="toc_1">Intent</h1>

<h2 id="toc_1.1">Intent概念</h2>
<p>
Intent表示动作将被执行的抽象类,它可以被用来<code>startActivity</code>,<code>broadcastIntent</code>,<code>startService</code>或<code>bindService</code>
</p>

<p>
它主要包含两种信息
</p>
<ul>
<li>
动作 -- 如ACTION_VIEW, ACTION_EDIT, ACTION_MAIN, ACTION_DIAL，可自定义Action，作为构造函数的参数传给Intent

<li>
数据 -- 如Uri

</ul>

<pre class="brush:text">
自定义Action是给一个Intent赋值字符串形式的名字(android:name属性)，&lt;intent-filter&gt;标签用来匹配，符合这个名字的Intent则优先调用。
</pre>

<p>
它还包括一些附加属性
</p>
<ul>
<li>
category -- 关于动作执行的附加信息

<li>
type -- 关于数据类型的附加信息

<li>
component -- 关于组件

<li>
extras -- 与Bundle相关的信息

</ul>

<h3 id="toc_1.1.1">相关方法和变量</h3>
<dl>
<dt><em>Intent putExtra(String name, String value)</em> </dt>
<dd>添加额外的数据</dd>
</dl>

<dl>
<dt><em>String getStringExtra(String name)</em> </dt>
<dd>获取字符串数据</dd>
</dl>

<dl>
<dt>...... </dt>
<dd>省略</dd>
</dl>

<h3 id="toc_1.1.2">Intent分类</h3>
<table>
<tr>
<th>
标准Actions
</th>
<th>
标准Broadcast
</th>
<th>
标准categories
</th>
<th>
标准extra data
</th>
</tr>
<tr>
<td>
ACTION_MAIN
</td>
<td>
ACTION_TIME_TICK
</td>
<td>
CATEGORY_DEFAULT
</td>
<td>
EXTRA_ALARM_COUNT
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
ACTION_VIEW
</td>
<td>
ACTION_TIME_CHANGED
</td>
<td>
CATEGORY_BROWSABLE
</td>
<td>
EXTRA_BCC
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
ACTION_ATTACH_DATA
</td>
<td>
ACTION_TIMEZONE_CHANGED
</td>
<td>
CATEGORY_CAR_MODE
</td>
<td>
EXTRA_CC
</td>
</tr>
<tr>
<td>
ACTION_EDIT
</td>
<td>
ACTION_BOOT_COMPLETED
</td>
<td>
CATEGORY_TAB
</td>
<td>
EXTRA_CHANGED_COMPONENT_NAME
</td>
</tr>
<tr>
<td>
ACTION_PICK
</td>
<td>
ACTION_PACKAGE_ADDED
</td>
<td>
CATEGORY_ALTERNATIVE
</td>
<td>
EXTRA_DATA_REMOVED
</td>
</tr>
<tr>
<td>
ACTION_CHOOSER
</td>
<td>
ACTION_PACKAGE_CHANGED
</td>
<td>
CATEGORY_SELECTED_ALTERNATIVE
</td>
<td>
EXTRA_DOCK_STATE
</td>
</tr>
<tr>
<td>
ACTION_GET_CONTENT
</td>
<td>
ACTION_PACKAGE_REMOVED
</td>
<td>
CATEGORY_LAUNCHER
</td>
<td>
EXTRA_DOCK_STATE_CAR
</td>
</tr>
<tr>
<td>
ACTION_DIAL
</td>
<td>
ACTION_PACKAGE_RESTARTED
</td>
<td>
CATEGORY_INFO
</td>
<td>
EXTRA_DOCK_STATE_DESK
</td>
</tr>
<tr>
<td>
ACTION_CALL
</td>
<td>
ACTION_PACKAGE_DATA_CLEARED
</td>
<td>
CATEGORY_HOME
</td>
<td>
EXTRA_DOCK_STATE_UNDOCKED
</td>
</tr>
<tr>
<td>
ACTION_SEND
</td>
<td>
ACTION_UID_REMOVED
</td>
<td>
CATEGORY_PREFERENCE
</td>
<td>
EXTRA_DONT_KILL_APP
</td>
</tr>
<tr>
<td>
ACTION_SENDTO
</td>
<td>
ACTION_BATTERY_CHANGED
</td>
<td>
CATEGORY_TEST
</td>
<td>
EXTRA_EMAIL
</td>
</tr>
<tr>
<td>
ACTION_ANSWER
</td>
<td>
ACTION_POWER_CONNECTED
</td>
<td>
CATEGORY_CAR_DOCK
</td>
<td>
EXTRA_INITIAL_INTENTS
</td>
</tr>
<tr>
<td>
ACTION_INSERT
</td>
<td>
ACTION_POWER_DISCONNECTED
</td>
<td>
CATEGORY_DESK_DOCK
</td>
<td>
EXTRA_INTENT
</td>
</tr>
<tr>
<td>
ACTION_DELETE
</td>
<td>
ACTION_SHUTDOWN
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_KEY_EVENT
</td>
</tr>
<tr>
<td>
ACTION_RUN
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_PHONE_NUMBER
</td>
</tr>
<tr>
<td>
ACTION_SYNC
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_REMOTE_INTENT_TOKEN
</td>
</tr>
<tr>
<td>
ACTION_PICK_ACTIVITY
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_REPLACING
</td>
</tr>
<tr>
<td>
ACTION_SEARCH
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_SHORTCUT_ICON
</td>
</tr>
<tr>
<td>
ACTION_WEB_SEARCH
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_SHORTCUT_ICON_RESOURCE
</td>
</tr>
<tr>
<td>
ACTION_FACTORY_TEST
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_SHORTCUT_INTENT
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_STREAM
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_SHORTCUT_NAME
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_SUBJECT
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_TEMPLATE
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_TEXT
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_TITLE
</td>
</tr>
<tr>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
&nbsp;
</td>
<td>
EXTRA_UID
</td>
</tr>
</table>
  
<h3 id="toc_1.1.3">示例代码</h3>
<pre class="brush:xml">
&lt;activity android:name="NotesList" android:label="@string/title_notes_list"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name="android.intent.action.MAIN" /&gt;
        &lt;action android:name="com.foxconn.ebook.noteslist" /&gt;
        &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
    &lt;/intent-filter&gt;
    
    &lt;intent-filter&gt;
        &lt;action android:name="android.intent.action.VIEW" /&gt;
        &lt;action android:name="android.intent.action.EDIT" /&gt;
        &lt;action android:name="android.intent.action.PICK" /&gt;
        &lt;category android:name="android.intent.category.DEFAULT" /&gt;
        &lt;data android:mimeType="vnd.android.cursor.dir/vnd.google.note" /&gt;
    &lt;/intent-filter&gt;
    
    &lt;intent-filter&gt;
        &lt;action android:name="android.intent.action.GET_CONTENT" /&gt;
        &lt;category android:name="android.intent.category.DEFAULT" /&gt;
        &lt;data android:mimeType="vnd.android.cursor.item/vnd.google.note" /&gt;
        &lt;extra android:name="from" android:value="place"&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</pre>

<h3 id="toc_1.1.4">添加标识符</h3>
<ul>
<li>
通过<code>getFlags</code>, <code>setFlags</code>和<code>addFlags</code>添加标识符

</ul>

<table>
<tr>
<th>
类型
</th>
<th>
标识
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_BROUGHT_TO_FRONT
</td>
<td>
和singleTask模式相同
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_CLEAR_TOP
</td>
<td>
清除任务栈中被调用的Activity之上的所有Activity
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET
</td>
<td>
当下次重置时清除被调用的Activity。例如从Home返回时，清除该标志的Activity
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS
</td>
<td>
该标志的Activity将排除在最近启动的Activity列表之外
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_FORWARD_RESULT
</td>
<td>
如果重新启一个已存在的Activity，则新的Activity将调用setResult(int)方法，将结果返回给原始的Activity
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY
</td>
<td>
该Activity将从历史堆栈中启动，响应Home键的常按事件
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_MULTIPLE_TASK
</td>
<td>
无论是否已存在该Activity，系统都将启动一个新的Activity
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_NEW_TASK
</td>
<td>
在一个新的任务堆栈中启动该Activity
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_NO_ANIMATION
</td>
<td>
禁用动画过渡效果
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_NO_HISTORY
</td>
<td>
该Activity不会保存在任务堆栈中
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_NO_USER_ACTION
</td>
<td>
该标志将阻止onUserLeaveHint()的回调
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_PREVIOUS_IS_TOP
</td>
<td>
&nbsp;
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_REORDER_TO_FRONT
</td>
<td>
如果已经存在该Activity，则被调用到前台
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_RESET_TASK_IF_NEEDED
</td>
<td>
如果需要，则重置该任务
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_ACTIVITY_SINGLE_TOP
</td>
<td>
如果该任务在栈顶，则不会再启动
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_DEBUG_LOG_RESOLUTION
</td>
<td>
该标志将启用debug模式
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_FROM_BACKGROUND
</td>
<td>
该标志指明该任务是来自后台，而不是来自用户的交互
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_GRANT_READ_URI_PERMISSION
</td>
<td>
赋予读取URI的权限
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_GRANT_WRITE_URI_PERMISSION
</td>
<td>
赋予写入URI的权限
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_RECEIVER_REGISTERED_ONLY
</td>
<td>
当发送一个广播时，只有注册的接收者能够被呼叫
</td>
</tr>
<tr>
<td>
int
</td>
<td>
FLAG_RECEIVER_REPLACE_PENDING
</td>
<td>
当发送一个广播时，新的广播将替换符合条件的已存在的广播。该条件通过Intent.filterEquals来判断
</td>
</tr>
</table>

<h2 id="toc_1.2">应用示例</h2>
<ul>
<li>
<a href="获取指定Web页面.html">获取指定Web页面</a>

<li>
<a href="启动外部应用程序.html">启动外部应用程序</a>

<li>
<a href="显示地图.html">显示地图</a>

<li>
<a href="拨打电话.html">拨打电话</a>

<li>
<a href="发送短信.html">发送短信</a>

<li>
<a href="发送email.html">发送email</a>

<li>
<a href="Install和Uninstall程序.html">Install和Uninstall程序</a>

<li>
<a href="播放多媒体.html">播放多媒体</a>

<li>
<a href="启动多个Broadcast.html">启动多个Broadcast</a>

<li>
<a href="Intent传递对象.html">Intent传递对象</a>

<li>
<a href="应用程序的mimeType.html">应用程序的mimeType</a>

</ul>


<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

</body>
</html>
