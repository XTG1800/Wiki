<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>CTS测试</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
	<link type="text/css" rel="stylesheet" href="css_style/style_zenki.css"/>

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>


<h1 id="toc_1">CTS测试</h1>

<div class="toc">
<ul>
<li><a href="#toc_1">CTS测试</a></li>
<ul>
<li><a href="#toc_1.1">device设置</a></li>
<li><a href="#toc_1.2">CTS包目录结构</a></li>
<li><a href="#toc_1.3">测试命令</a></li>
<ul>
<li><a href="#toc_1.3.1">启动CTS测试</a></li>
<li><a href="#toc_1.3.2">显示帮助命令</a></li>
<li><a href="#toc_1.3.3">测试范例</a></li>
</ul>
<li><a href="#toc_1.4">测试结果</a></li>
</ul>
</ul>
</div>

<h2 id="toc_1.1">device设置</h2>
<ul>
<li>
(1). 勾選 Settings &gt; Applications &gt; Development中的3個選項(USB debugging, Stay awake, Allow mock locations).
</li>
<li>
(2). 設置 Settings &gt; Sound &amp; Display &gt; Screen Timeout為"Never Timeout"
</li>
<li>
(3). 安裝2個APK：
</li>
<ul>
<li>
其一為： adb install -r android-cts/repository/testcases/CtsDelegatingAccessibilityService.apk
</li>
<li>
其二為： adb install -r android-cts/repository/testcases/CtsDeviceAdmin.apk(CTS r4及以上)
</li>
</ul>
<li>
(4). 开启下列设置选项： 
</li>
<ul>
<li>
Settings &gt; Accessibility &gt; Accessibility &gt; Delegating Accessibility Service 
</li>
<li>
Settings &gt;Location &amp; security &gt; Select device administrators
</li>
</ul>
<li>
(5). 必須連上網路，並Log in a Google account.(可选) 
</li>
<li>
(6). 插入一張空的Micro SD card.
</li>
<li>
(7). 設置時間和日期為PC的時間和日期。
</li>
<li>
(8). 所有設置完成後reboot待測device(不要讓任何其它程序運行)，並讓機器停留在Home screen. 
</li>
</ul>

<h2 id="toc_1.2">CTS包目录结构</h2>
<ul>
<li>
从网络下载Google的CTS测试包，并解压生成以下目录：
</li>
</ul>

<pre class="brush:bash">
.
|-- docs
|-- repository
|   |-- host_config.xml         # 配置文件
|   |-- plans                   # plan
|   |-- results                 # 测试结果
|   `-- testcases               # testcase
`-- tools
    |-- cts.jar
    |-- ddmlib-prebuilt.jar
    |-- hosttestlib.jar
    |-- junit.jar
    `-- startcts                # 测试脚本
</pre>

<h2 id="toc_1.3">测试命令</h2>
<h3 id="toc_1.3.1">启动CTS测试</h3>
<pre class="brush:bash">
# 进入tools目录
$ ./startcts
</pre>

<h3 id="toc_1.3.2">显示帮助命令</h3>
<pre class="brush:bash">
# 显示以下帮助信息
cts_host &gt; help
Host:
    help: 显示帮助信息
    exit: 退出测试
Plan:
    ls --plan:  显示可用的测试plan
    ls --plan plan_name:    列出特定plan的测试内容
    add --plan plan_name:   添加一个指定名称的plan
    add --derivedplan plan_name -s/--session session_id -r/--result result_type: 
    rm --plan plan_name/all: 
    start --plan test_plan_name:    执行一个plan
    start --plan test_plan_name -d/--device device_ID:  给特定ID的device执行一个plan
    start --plan test_plan_name -t/--test test_name:    执行指定的测试项
    start --plan test_plan_name -p/--package java_package_name: 
    start --plan test_plan_name -t/--test test_name -d/--device device_ID: 
    start --plan test_plan_name -p/--package java_package_name -d/--device device_ID: 
  Package:
    ls -p/--package:    列出可用测试包
    ls -p/--package package_name:   根据包名列出测试内容
    add -p/--package root: 
    rm -p/--package package_name/all: 
  Result:
    ls -r/--result: 
    ls -r/--result -s/--session session_id: 
    ls -r/--result [pass/fail/notExecuted/timeout] -s/--session session_id: 
  History:
    history/h: 
    history/h count: 
    history/h -e num: 
  Device:
    ls -d/--device: 列出可用设备
</pre>

<h3 id="toc_1.3.3">测试范例</h3>
<pre class="brush:bash">
# 列出可用plan
cts_host &gt; ls --plan
List of plans (8 in total):
Android
AppSecurity
CTS
Java
Performance
RefApp
Signature
VM

# 开始测试VM
cts_host &gt; start --plan VM

# 测试单独的包
cts_host &gt; start --plan Java -p android.telephony.gsm.cts.SmsManagerTest

# 测试单独的项目
cts_host &gt; start --plan Java -t android.telephony.gsm.cts.SmsManagerTest#testSendMessages
</pre>

<h2 id="toc_1.4">测试结果</h2>
<ul>
<li>
结果会以zip包的形式保存在repository/results/目录中，文件名以测试时间命名。
</li>
</ul>
<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

<!--<script type="text/javascript">-->
<!--var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");-->
<!--document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));-->
<!--</script>-->
<!--<script type="text/javascript">-->
<!--try {-->
<!--var pageTracker = _gat._getTracker("UA-15922433-1");-->
<!--pageTracker._trackPageview();-->
<!--} catch(err) {}-->
<!--</script>-->

</body>
</html>
