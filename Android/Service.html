<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Service</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
	<link type="text/css" rel="stylesheet" href="css_style/style_zenki.css"/>

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>


<h1 id="toc_1">Service</h1>

<h2 id="toc_1.1">什么是Service</h2>
<ul>
<li>
Local Service不是单独的进程，也不是一个单独的线程，它与主程序在同一个线程中。
</li>
<li>
Remote Service是一个单独的进程，并且受系统控制，主进程停止而Service进程不一定停止。
</li>
<li>
通过Context.startService()方法，运行一个Service，告知应用程序某些逻辑需要在后台处理。
</li>
<li>
通过Context.bindService()方法，可以将某些功能暴露给外部应用程序，并提供一些交互和服务。
</li>
</ul>

<h2 id="toc_1.2">Service生命周期</h2>
<ul>
<li>
Service从startService调用开始，直到stopService调用结束，也可以通过自身调用Service.stopSelf()或者Service.stopSelfResult()停止。
</li>
<li>
客户端通过bindService绑定到一个Service，通过unbindService关闭，传递给bindService的Intent对象会传递给onBind，传递给unbindService的Intent对象会传递给onUnbind。
</li>
<li>
如果有一个客户绑定到Service，stopService不会立即停止这个Service，必须要等待客户取消绑定。
</li>
<li>
在严重的内存压力下，service会被系统kill,并在稍后重新启动。
</li>
</ul>

<p>
<img src="pic/service_lifecycle.png" />
</p>

<h2 id="toc_1.3">Service调用</h2>
<ul>
<li>
<code>Context.startService()</code>用来启动一个Service，
</li>
</ul>

<pre class="brush:text">
先调用onCreate()，再调用onStart()，如果Service已经运行，只调用onStart()，所以onStart可以调用多次。
stopService()直接调用onDestroy()，如果没有调用，Service会一直运行。
</pre>

<ul>
<li>
<code>Context.bindService()</code>
</li>
</ul>

<pre class="brush:text">
先调用onCreate()，再调用onBind()，onBind将返回给客户端一个IBind接口，并允许客户端回调服务的方法，
这时调用者和Service绑定在一起，退出时调用onUnbind()，再调用onDestroy()。
</pre>

<ul>
<li>
Service在每次开启和关闭时，只有onStart()可被调用多次。
</li>
<li>
BroadcastReceiver只能通过startService启动Service
</li>
</ul>
<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

<!--<script type="text/javascript">-->
<!--var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");-->
<!--document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));-->
<!--</script>-->
<!--<script type="text/javascript">-->
<!--try {-->
<!--var pageTracker = _gat._getTracker("UA-15922433-1");-->
<!--pageTracker._trackPageview();-->
<!--} catch(err) {}-->
<!--</script>-->

</body>
</html>
