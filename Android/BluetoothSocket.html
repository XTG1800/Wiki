<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>BluetoothSocket</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
    <link rel="Stylesheet" type="text/css" href="../css_style/style_zenki.css">

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>

<!-- wrap the vimwiki html -->

<h1 id="toc_1">BluetoothSocket</h1>

<h2 id="toc_1.1">功能描述</h2>
<pre class="brush:text">
    上面说过蓝牙端口监听接口和TCP端口类似：Socket和ServerSocket类。在服务器端，使用BluetoothServerSocket类
来创建一个监听服务端口。当一个连接被BluetoothServerSocket所接受，它会返回一个新的BluetoothSocket来管理该连接。
在客户端，使用一个单独的BluetoothSocket类去初始化一个外接连接和管理该连接。最通常使用的蓝牙端口是RFCOMM，
它是被 Android API支持的类型。RFCOMM是一个面向连接，通过蓝牙模块进行的数据流传输方式，它也被称为串行端口规范（Serial Port Profile，SPP）。
为了创建一个BluetoothSocket去连接到一个已知设备，使用方法 BluetoothDevice.createRfcommSocketToServiceRecord()。
然后调用connect()方法去尝试一个面向远程设备的连接。这个调用将被阻塞指导一个连接已经建立或者该链接失效。
为了创建一个BluetoothSocket作为服务端（或者"主机"），查看BluetoothServerSocket文档。每当该端口连接成功，
无论它初始化为客户端，或者被接受作为服务器端，通过 getInputStream()和getOutputStream()来打开IO流，
从而获得各自的InputStream和OutputStream 对象BluetoothSocket类线程安全。特别的，close()方法总会马上放弃外界操作并关闭服务器端口。
如果使用需要BLUETOOTH权限的许可。
</pre>

<h2 id="toc_1.2">相关方法说明</h2>
<h3 id="toc_1.2.1">方法说明</h3>
<table>
<tr>
<th>
类型
</th>
<th>
名称
</th>
<th>
描述
</th>
</tr>
<tr>
<td>
void
</td>
<td>
close()
</td>
<td>
关闭端口并释放资源
</td>
</tr>
<tr>
<td>
void
</td>
<td>
connect()
</td>
<td>
连接到远程设备
</td>
</tr>
<tr>
<td>
InputStream
</td>
<td>
getInputStream()
</td>
<td>
通过连接的端口获得输入流
</td>
</tr>
<tr>
<td>
OutputStream
</td>
<td>
getOutputStream()
</td>
<td>
通过连接的端口获得输出流
</td>
</tr>
<tr>
<td>
BluetoothDevice
</td>
<td>
getRemoteDevice()
</td>
<td>
获得该端口正在连接或者已经连接的远程设备
</td>
</tr>
</table>
<blockquote>
connect()函数链接到远程设备时，该方法将阻塞，直到一个连接建立或者失效。如果该方法没有返回异常值，
则该端口现在已经建立。当设备查找正在进行的时候，创建对远程蓝牙设备的新连接不可被尝试。在蓝牙适配器上，
设备查找是一个重量级过程，并且肯定会降低一个设备的连接。使用 cancelDiscovery()方法去取消一个外界的查询。
查询并不由活动所管理，而作为一个系统服务来运行，所以即使它不能直接请求一个查询，应用程序也总会调用cancelDiscovery()
方法。close()方法可以用来放弃从另一线程而来的调用。getInputStream()函数通过连接的端口获得输入数据流，
即使该端口未连接，该输入数据流也会返回。不过在该数据流上的操作将抛出异常，直到相关的连接已经建立,当然在聊天实例中，
也是我们用来读取获得数据流。而getOutputStream()函数通过连接的端口获得输出数据流，即使该端口未连接，该输出数据流也会返回。
不过在该数据流上的操作将抛出异常，直到相关的连接已经建立，同样用于聊天实例上的发送消息操作。
</blockquote>


<footer>
    <a href="index.html" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="http://www.163.com/" id="back-email">Email</a>
</footer>

</article>
</div>

</body>
</html>
