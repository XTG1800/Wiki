<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>接口设计</title>
    <!--格式化代码的特效脚本-->
    <script type="text/javascript" src="scripts/shCore.js"></script>
    <script type="text/javascript" src="scripts/shBrushBash.js"></script>
    <script type="text/javascript" src="scripts/shBrushCpp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCSharp.js"></script>
    <script type="text/javascript" src="scripts/shBrushCss.js"></script>
    <script type="text/javascript" src="scripts/shBrushDelphi.js"></script>
    <script type="text/javascript" src="scripts/shBrushDiff.js"></script>
    <script type="text/javascript" src="scripts/shBrushGroovy.js"></script>
    <script type="text/javascript" src="scripts/shBrushJava.js"></script>
    <script type="text/javascript" src="scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="scripts/shBrushPhp.js"></script>
    <script type="text/javascript" src="scripts/shBrushPython.js"></script>
    <script type="text/javascript" src="scripts/shBrushPlain.js"></script>
    <script type="text/javascript" src="scripts/shBrushRuby.js"></script>
    <script type="text/javascript" src="scripts/shBrushScala.js"></script>
    <script type="text/javascript" src="scripts/shBrushSql.js"></script>
    <script type="text/javascript" src="scripts/shBrushVb.js"></script>
    <script type="text/javascript" src="scripts/shBrushXml.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/shCoreZenki.css"/>
    <link type="text/css" rel="stylesheet" href="styles/shThemeZenki.css"/>
    <script type="text/javascript">
        SyntaxHighlighter.all();
    </script>
    <link rel="Stylesheet" type="text/css" href="../css_style/style_zenki.css">

</head>

<body>
<div id="wrapper">
<header>

<div id="logo">
</div>

<nav>
    <ul>
        <!--<li class="first"><a href="diary/diary.html">日记</a></li>-->
     </ul>
</nav>
</header>

<article>

<!-- wrap the vimwiki html -->

<h1 id="toc_1">接口设计</h1>

<div class="toc">
<ul>
<li><a href="#toc_1">接口设计</a>
<ul>
<li><a href="#toc_1.1">接口设计的原则</a>
<li><a href="#toc_1.2">逻辑架构设计的思路</a>
<li><a href="#toc_1.3">质疑驱动的思路</a>
<li><a href="#toc_1.4">设计模式在架构设计中的运用</a>
<ul>
<li><a href="#toc_1.4.1">灰盒包图示例</a>
</ul>
<li><a href="#toc_1.5">压缩器设计范例</a>
<ul>
<li><a href="#toc_1.5.1">概念架构设计</a>
<li><a href="#toc_1.5.2">结构的切分</a>
<li><a href="#toc_1.5.3">协作以验证</a>
<li><a href="#toc_1.5.4">包-接口设计</a>
<li><a href="#toc_1.5.5">质疑后的设计</a>
</ul>
</ul>
</ul>
</div>

<p>
<em>世界是复杂的,很多东西难以直接获得。例如,直接追求幸福,是永远追不到的。《乐在工作》一书中说幸福是副产品。</em>
</p>

<h2 id="toc_1.1">接口设计的原则</h2>
<ul>
<li>
“分”是手段, “合”是目的。不能“合”在一起支持更高层次功能的模块,又有何用呢?

<li>
协作决定接口。

<li>
直接设计接口,是很多“面向接口的”架构依然拙劣的原因之一。类似“我的接口我做主”的观点是错误的。

</ul>

<h2 id="toc_1.2">逻辑架构设计的思路</h2>
<ul>
<li>
首先考虑结构方面的切分。手段是上面所讲分层的细化、分区的引入、机制的提取。(通过<code>包、接口图</code>来描述)

<li>
然后,让切分出的职责协作起来,验证能否完成功能。(通过<code>序列图</code>描述)

<li>
质疑设计

<ul>
<li>
功能方面,特殊的功能支持吗?

<li>
质量方面,耦合性、重用性、性能等怎么样?

</ul>
</ul>

<h2 id="toc_1.3">质疑驱动的思路</h2>
<ul>
<li>
第一步，质疑驱动的逻辑架构设计整体思路,是从运用分层的细化、分区的引入、机制的提取进行子系统划分开始的。

<li>
第二步，找到某功能的参与单元。若找不到或明显缺单元,就可以直接返回第1步了,以补充遗漏的职责单元。

<li>
第三步，让它们协作完成功能。研究第2步找到的参与单元之间的协作关系,看看能否完成预期功能,完成得怎么样?

<li>
第四步，质疑并推进设计的深入。通过质疑“对不对”和“好不好”,可以发现新职责,或者调整协作方式。这意味着,第1步的子系统切分方案被调整、被优化......如此循环。

</ul>

<p>
<img src="http:pic/zhiyi_jiagou.png" />
</p>

<h2 id="toc_1.4">设计模式在架构设计中的运用</h2>
<ul>
<li>
明确子系统内的结构。

<li>
明确包间的协作关系。

<li>
通过灰盒包图来实现

</ul>

<p>
<img src="http:pic/灰盒包图1.png" />
<img src="http:pic/灰盒包图2.png" />
</p>

<h3 id="toc_1.4.1">灰盒包图示例</h3>
<p>
<img src="http:pic/灰盒包图示例.png" />
</p>

<h2 id="toc_1.5">压缩器设计范例</h2>
<h3 id="toc_1.5.1">概念架构设计</h3>
<p>
<img src="http:pic/myzip1.png" />
</p>

<h3 id="toc_1.5.2">结构的切分</h3>
<ul>
<li>
分层的细化。压缩实现层从原来的压缩控制层中分离出来。回忆本章所讲的“子系统划分策略背后的4大原则” 。无论是从职责不同的角度,还是从所需技能的角度考虑, 两者都应该分离成为单独的“子系统”。

<li>
分区的引入。界面交互层必须进一步分区,例如:支持右键菜单的“Windows 外壳扩 展”部分被独立。

<li>
机制的提取。例子是智能缓冲机制,它应该成为一个通用性的基础子系统。同时,为了使它可重用,缓冲区不负责“缓冲区已满”时的具体处理而是回调外部单元进行。再者,为了提高使用友好性,缓冲区具有一定“智能”,它会自动保存溢出的部分,从而简化使用缓冲区的接口。

</ul>

<p>
<img src="http:pic/myzip2.png" />
</p>

<h3 id="toc_1.5.3">协作以验证</h3>
<p>
<img src="http:pic/myzip3.png" />
</p>

<h3 id="toc_1.5.4">包-接口设计</h3>
<p>
<img src="http:pic/myzip4.png" />
</p>

<h3 id="toc_1.5.5">质疑后的设计</h3>
<p>
<img src="http:pic/myzip5.png" />
<img src="http:pic/myzip6.png" />
</p>


<footer>
    <a href="http://zenki2001cn.github.com/Wiki" id="back-home">首页</a>
    <a href="index.html" id="back-about">关于</a>
    <a href="zenki2001cn@163.com" id="back-email">Email</a>
</footer>

</article>
</div>

</body>
</html>
